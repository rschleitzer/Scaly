<chapter xml:id="expressions">
  <title>Expressions</title>

  <section xml:id="expr-overview">
    <title>Overview</title>
    <para>Expressions are the core computational units of Scaly. Every expression
      evaluates to a value. Unlike many languages, Scaly uses postfix operators
      and does not define operator precedence â€” evaluation order is always
      explicit.
    </para>
  </section>

  &generated-tests;

  <section xml:id="expr-if">
    <title>If Expressions</title>
    <para>If expressions evaluate one of two branches based on a boolean condition.
      The syntax is <code>if</code> followed by the condition, a colon, the consequent,
      and optionally <code>else</code> with an alternative.
    </para>
    <programlisting>if true: 1 else 0        ; evaluates to 1
if false: 1 else 0       ; evaluates to 0
if 5 > 3: 10 else 20     ; evaluates to 10</programlisting>
    <para>
      If expressions can be nested:
    </para>
    <programlisting>if false: 1 else if true: 2 else 3  ; evaluates to 2</programlisting>
  </section>

  <section xml:id="expr-match">
    <title>Match Expressions</title>
    <para>Match expressions compare a value against multiple cases.
      The syntax is <code>match</code> followed by the scrutinee, a colon,
      one or more <code>case</code> branches, and optionally <code>else</code>.
    </para>
    <programlisting>match 2: case 1: 10 case 2: 20 else 0  ; evaluates to 20
match 5: case 1: 10 else 0              ; evaluates to 0</programlisting>
    <para>
      Multiple cases can share the same branch:
    </para>
    <programlisting>match 2: case 1 case 2: "one or two" else "other"</programlisting>
  </section>

  <section xml:id="expr-let">
    <title>Let Bindings</title>
    <para>Let bindings introduce local variables. The syntax is
      <code>let</code> followed by a name and a value expression (no equals sign).
      Multiple statements are separated by colons.
    </para>
    <programlisting>let x 5: x               ; evaluates to 5
let x 5: x + 3           ; evaluates to 8
let x 5: let y 3: x + y  ; evaluates to 8</programlisting>
    <para>
      The value can be any expression, including arithmetic:
    </para>
    <programlisting>let x 2 + 3: x * 2       ; x is 5, result is 10</programlisting>
  </section>

</chapter>
