<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Expressions</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="The Scaly Programming Language"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Definitions"
HREF="definitions.htm"><LINK
REL="NEXT"
TITLE="Standard Library Reference"
HREF="stdlib.htm"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Scaly Programming Language</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="definitions.htm"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="stdlib.htm"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="AEN751"
></A
>Chapter 5 Expressions</H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
><A
HREF="expressions.htm#AEN753"
>Overview</A
></DT
><DT
><A
HREF="expressions.htm#AEN756"
>Literals</A
></DT
><DT
><A
HREF="expressions.htm#AEN906"
>Operations</A
></DT
><DT
><A
HREF="expressions.htm#AEN1054"
>If Expressions</A
></DT
><DT
><A
HREF="expressions.htm#AEN1062"
>Match Expressions</A
></DT
><DT
><A
HREF="expressions.htm#AEN1071"
>Choose Expressions</A
></DT
></DL
></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN753"
>Overview</A
></H1
><P
>Expressions are the core computational units of Scaly. Every expression
      evaluates to a value. Unlike many languages, Scaly uses postfix operators
      and does not define operator precedence â€” evaluation order is always
      explicit.
    </P
></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN756"
>Literals</A
></H1
><P
>Expressions are the core computational units of Scaly. Every expression evaluates to a value.</P
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN759"
>Boolean Literals</A
></H2
><P
>The boolean literals are true and false.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN762"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>true</TT
></TD
><TD
><TT
CLASS="literal"
>true</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>false</TT
></TD
><TD
><TT
CLASS="literal"
>false</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN781"
>Integer Literals</A
></H2
><P
>Integer literals are sequences of decimal digits, optionally preceded by a minus sign for negative numbers.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN784"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>42</TT
></TD
><TD
><TT
CLASS="literal"
>42</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>0</TT
></TD
><TD
><TT
CLASS="literal"
>0</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>-7</TT
></TD
><TD
><TT
CLASS="literal"
>-7</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN808"
>Hexadecimal Literals</A
></H2
><P
>Hexadecimal literals start with 0x or 0X followed by hexadecimal digits (0-9, a-f, A-F).</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN811"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>0xFF</TT
></TD
><TD
><TT
CLASS="literal"
>255</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>0x1A</TT
></TD
><TD
><TT
CLASS="literal"
>26</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>0x0</TT
></TD
><TD
><TT
CLASS="literal"
>0</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN835"
>Floating-Point Literals</A
></H2
><P
>Floating-point literals contain a decimal point separating the integer and fractional parts.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN838"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>3.14</TT
></TD
><TD
><TT
CLASS="literal"
>3.14</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>2.0</TT
></TD
><TD
><TT
CLASS="literal"
>2</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>0.5</TT
></TD
><TD
><TT
CLASS="literal"
>0.5</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN862"
>String Literals</A
></H2
><P
>String literals are enclosed in double quotes. They may span multiple lines, with line breaks preserved in the resulting string.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN865"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>"hello"</TT
></TD
><TD
><TT
CLASS="literal"
>hello</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>""</TT
></TD
><TD
><TT
CLASS="literal"
></TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN884"
>Character Literals</A
></H2
><P
>Character literals represent a single character, enclosed in backticks.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN887"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>`a`</TT
></TD
><TD
><TT
CLASS="literal"
>a</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>`Z`</TT
></TD
><TD
><TT
CLASS="literal"
>Z</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN906"
>Operations</A
></H1
><P
>Operations allow combining expressions.</P
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN909"
>Prefix Functions</A
></H2
><P
>An operation is a sequence of operands that evaluates to a single value.
        Each operand is an expression optionally followed by member access. An operation ends with a colon, a line break,
        or anything which is not an expression. Evaluation uses a context which is empty at the start of an operation.
        When the context is empty, operator-shaped identifiers act as prefix functions, taking the next operand as their argument.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN912"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>-7</TT
></TD
><TD
><TT
CLASS="literal"
>-7</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>-(-3)</TT
></TD
><TD
><TT
CLASS="literal"
>3</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>+ 3</TT
></TD
><TD
><TT
CLASS="literal"
>3</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN936"
>Operator Chains</A
></H2
><P
>When the context holds a value, operators chain left-to-right. Each operator takes the current value and the next operand,
        producing a new value. There is no operator precedence built into the language itself. Operator precedence is built into the implementation
        of the individual operators. The common arithmetic operators are built into the standard library.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN939"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>3 + 4</TT
></TD
><TD
><TT
CLASS="literal"
>7</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>10 - 3</TT
></TD
><TD
><TT
CLASS="literal"
>7</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>6 * 7</TT
></TD
><TD
><TT
CLASS="literal"
>42</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>3 + 4 * 2</TT
></TD
><TD
><TT
CLASS="literal"
>11</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>20 - 5 - 3</TT
></TD
><TD
><TT
CLASS="literal"
>12</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN973"
>Parentheses and Grouping</A
></H2
><P
>Parentheses create a empty context. This allows prefix forms inside an otherwise operator chain,
        and explicit grouping when needed.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN976"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>5 * (- 2)</TT
></TD
><TD
><TT
CLASS="literal"
>-10</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>2 * (3 + 4)</TT
></TD
><TD
><TT
CLASS="literal"
>14</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>(2 + 3) * (4 + 1)</TT
></TD
><TD
><TT
CLASS="literal"
>25</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN1000"
>Identifier Shapes</A
></H2
><P
>Identifiers can have name shape (alphanumeric) or operator shape (symbols). The shape is purely lexical and does not determine behavior. Whether an identifier acts as a prefix function or chain operator depends on its declaration and the register state.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN1003"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>10 div 3</TT
></TD
><TD
><TT
CLASS="literal"
>3</TT
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>abs (- 5)</TT
></TD
><TD
><TT
CLASS="literal"
>5</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN1022"
>Let Bindings</A
></H2
><P
>Let bindings introduce local variables. The syntax is let followed by a name and a value expression (no equals sign). Multiple statements are separated by colons or newlines.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN1025"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><PRE
CLASS="programlisting"
>let x 5
x</PRE
></TD
><TD
><TT
CLASS="literal"
>5</TT
></TD
></TR
><TR
><TD
><PRE
CLASS="programlisting"
>let x 5
x + 3</PRE
></TD
><TD
><TT
CLASS="literal"
>8</TT
></TD
></TR
><TR
><TD
><PRE
CLASS="programlisting"
>let x 5
let y 3
x + y</PRE
></TD
><TD
><TT
CLASS="literal"
>8</TT
></TD
></TR
><TR
><TD
><PRE
CLASS="programlisting"
>let x 2 + 3
x * 2</PRE
></TD
><TD
><TT
CLASS="literal"
>10</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN1054"
>If Expressions</A
></H1
><P
>If expressions evaluate one of two branches based on a boolean condition.
      The syntax is <TT
CLASS="code"
>if</TT
> followed by the condition, a colon, the consequent,
      and optionally <TT
CLASS="code"
>else</TT
> with an alternative.
    </P
><PRE
CLASS="programlisting"
>if true: 1 else 0        ; evaluates to 1
if false: 1 else 0       ; evaluates to 0
if 5 &#62; 3: 10 else 20     ; evaluates to 10</PRE
><P
>&#13;      If expressions can be nested:
    </P
><PRE
CLASS="programlisting"
>if false: 1 else if true: 2 else 3  ; evaluates to 2</PRE
></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN1062"
>Match Expressions</A
></H1
><P
>Match expressions compare a value against multiple cases.
      The syntax is <TT
CLASS="code"
>match</TT
> followed by the scrutinee, a colon,
      one or more <TT
CLASS="code"
>case</TT
> branches, and optionally <TT
CLASS="code"
>else</TT
>.
    </P
><PRE
CLASS="programlisting"
>match 2: case 1: 10 case 2: 20 else 0  ; evaluates to 20
match 5: case 1: 10 else 0              ; evaluates to 0</PRE
><P
>&#13;      Multiple cases can share the same branch:
    </P
><PRE
CLASS="programlisting"
>match 2: case 1 case 2: "one or two" else "other"</PRE
></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN1071"
>Choose Expressions</A
></H1
><P
>Choose expressions pattern match on union types, binding the inner value to a variable.</P
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN1074"
>Basic Choose</A
></H2
><P
>Choose expressions match on the variant of a union value and bind the inner value.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN1077"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><PRE
CLASS="programlisting"
>define Option union(Some: int, None)
choose Some(5): when v: Some: v + 1 else 0</PRE
></TD
><TD
><TT
CLASS="literal"
>6</TT
></TD
></TR
><TR
><TD
><PRE
CLASS="programlisting"
>define Option union(Some: int, None)
choose None: when v: Some: v else -1</PRE
></TD
><TD
><TT
CLASS="literal"
>-1</TT
></TD
></TR
><TR
><TD
><PRE
CLASS="programlisting"
>define Option union(Some: int, None)
let x Some(10)
choose x: when v: Some: v * 2 else 0</PRE
></TD
><TD
><TT
CLASS="literal"
>20</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN1101"
>Choose with Result</A
></H2
><P
>Choose works with any union type, including Result.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN1104"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><PRE
CLASS="programlisting"
>define Result union(Ok: int, Err: String)
choose Ok(42): when v: Ok: v when e: Err: 0 else -1</PRE
></TD
><TD
><TT
CLASS="literal"
>42</TT
></TD
></TR
><TR
><TD
><PRE
CLASS="programlisting"
>define Result union(Ok: int, Err: String)
choose Err("error"): when v: Ok: v when e: Err: 0 else -1</PRE
></TD
><TD
><TT
CLASS="literal"
>0</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN1123"
>Choose Else Branch</A
></H2
><P
>The else branch is evaluated when no when clause matches.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN1126"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL
WIDTH="1*"><COL
WIDTH="1*"><THEAD
><TR
><TH
>Input</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><PRE
CLASS="programlisting"
>define Option union(Some: int, None)
choose None: when v: Some: v else 99</PRE
></TD
><TD
><TT
CLASS="literal"
>99</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="definitions.htm"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="stdlib.htm"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Definitions</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Standard Library Reference</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>